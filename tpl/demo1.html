<!DOCTYPE html>
<html lang="en">
    <head> 
        <meta charset="utf-8" /> 
        <title>demo1</title>
        <meta name="keywords" content="" />
        <meta name="description" content="" />
        <link rel="stylesheet" type="text/css" href="../css/reset.css" />
        <link rel="stylesheet" type="text/css" href="../css/styles.css" />
    </head>
    <body>
        <div class="container-box">
            <div class="menu-box">
                <ul>
                    <li>
                        <span class="dis-inline drag-box">1111</span>
                        <span class="dis-inline">文字111</span>
                    </li>
                    <li>
                        <span class="dis-inline drag-box">222</span>
                        <span class="dis-inline">文字111</span>
                    </li>
                    <li>
                        <span class="dis-inline drag-box">333</span>
                        <span class="dis-inline">文字111</span>
                    </li>
                    <li>
                        <span class="dis-inline drag-box">444</span>
                        <span class="dis-inline">文字111</span>
                    </li>
                </ul>
            </div>
            <div class="content-wrap">
                <!-- <div style="cursor: move;">ssssssssssssssssssssssss</div> -->
            </div>
            <div class="clone-div"></div>
        </div>
        <script type="text/javascript" src="../js/jquery.js"></script> 
        <script type='text/javascript' src='../js/jquery-ui.min.js'></script>
        <script type="text/javascript">
            $(function() {
                var cloneHtml = $('.drag-box').eq(0).clone().addClass('sssss');
                $('.clone-div').html(cloneHtml)

                $('.drag-box').each(function() {
                    var $dom = $(this).clone().addClass('clone-drag');
                    $(this).next($dom);
                });

                var tmp;
                // $('.drag-box').each(function() {
                //     var $dom = $(this).clone().addClass('clone-drag');
                //     tmp = $dom.css('z-index');
                //     if (tmp > zIndex)
                //         zIndex = tmp;
                // })
                $('.clone-drag').each(function() {
                    tmp = $(this).css('z-index');
                    if (tmp > zIndex)
                        zIndex = tmp;
                })
                make_draggable($('.drag-box'));

                $('.clone-box').each(function() {
                    tmp = $(this).css('z-index');
                    if (tmp > zIndex)
                        zIndex = tmp;
                });
            });

            var zIndex = 0;
            function make_draggable(elements) {
                elements.draggable({
                    opacity: 0.8,
                    containment: 'body',
                    start: function(e, ui) {
                        ui.helper.css('z-index', ++zIndex);
                    },
                    stop: function(e, ui) {
                        ui.helper.css({'left':0, 'top':0})
                        $('.content-wrap').append('<div class="clone-box"></div>')
                        clone_draggable($('.clone-box'))
                    }
                });
            }
            function clone_draggable(elements) {
                elements.draggable({
                    opacity: 0.8,
                    containment: 'parent',
                    start: function(e, ui) {
                        ui.helper.css('z-index', ++zIndex);
                    },
                    stop: function(e, ui) {
                    }
                });
            }
        </script>
    </body>
</html>